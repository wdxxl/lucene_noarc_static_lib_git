//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: jar:file:wdxxl_lucene_350.jar!org/apache/lucene/search/FieldDocSortedHitQueue.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/text/Collator.h"
#include "java/util/Locale.h"
#include "org/apache/lucene/search/FieldComparator.h"
#include "org/apache/lucene/search/FieldDoc.h"
#include "org/apache/lucene/search/FieldDocSortedHitQueue.h"
#include "org/apache/lucene/search/SortField.h"
#include "org/apache/lucene/util/PriorityQueue.h"

#pragma clang diagnostic ignored "-Wincomplete-implementation"

@interface OrgApacheLuceneSearchFieldDocSortedHitQueue ()

- (IOSObjectArray *)hasCollatorsWithOrgApacheLuceneSearchSortFieldArray:(IOSObjectArray *)fields;

@end

__attribute__((unused)) static IOSObjectArray *OrgApacheLuceneSearchFieldDocSortedHitQueue_hasCollatorsWithOrgApacheLuceneSearchSortFieldArray_(OrgApacheLuceneSearchFieldDocSortedHitQueue *self, IOSObjectArray *fields);

@implementation OrgApacheLuceneSearchFieldDocSortedHitQueue

- (instancetype)initWithInt:(jint)size {
  OrgApacheLuceneSearchFieldDocSortedHitQueue_initWithInt_(self, size);
  return self;
}

- (void)setFieldsWithOrgApacheLuceneSearchSortFieldArray:(IOSObjectArray *)fields {
  JreVolatileStrongAssign(&self->fields_, fields);
  JreVolatileStrongAssign(&self->collators_, OrgApacheLuceneSearchFieldDocSortedHitQueue_hasCollatorsWithOrgApacheLuceneSearchSortFieldArray_(self, fields));
  JreVolatileStrongAssign(&comparators_, [IOSObjectArray arrayWithLength:((IOSObjectArray *) nil_chk(fields))->size_ type:OrgApacheLuceneSearchFieldComparator_class_()]);
  for (jint fieldIDX = 0; fieldIDX < fields->size_; fieldIDX++) {
    IOSObjectArray_Set(nil_chk(JreLoadVolatileId(&comparators_)), fieldIDX, [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(fields, fieldIDX))) getComparatorWithInt:1 withInt:fieldIDX]);
  }
}

- (IOSObjectArray *)getFields {
  return JreLoadVolatileId(&fields_);
}

- (IOSObjectArray *)hasCollatorsWithOrgApacheLuceneSearchSortFieldArray:(IOSObjectArray *)fields {
  return OrgApacheLuceneSearchFieldDocSortedHitQueue_hasCollatorsWithOrgApacheLuceneSearchSortFieldArray_(self, fields);
}

- (jboolean)lessThanWithId:(OrgApacheLuceneSearchFieldDoc *)docA
                    withId:(OrgApacheLuceneSearchFieldDoc *)docB {
  jint n = ((IOSObjectArray *) nil_chk(JreLoadVolatileId(&fields_)))->size_;
  jint c = 0;
  for (jint i = 0; i < n && c == 0; ++i) {
    jint type = [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(nil_chk(JreLoadVolatileId(&fields_)), i))) getType];
    if (type == OrgApacheLuceneSearchSortField_STRING) {
      NSString *s1 = (NSString *) cast_chk(IOSObjectArray_Get(nil_chk(((OrgApacheLuceneSearchFieldDoc *) nil_chk(docA))->fields_), i), [NSString class]);
      NSString *s2 = (NSString *) cast_chk(IOSObjectArray_Get(((OrgApacheLuceneSearchFieldDoc *) nil_chk(docB))->fields_, i), [NSString class]);
      if (s1 == nil) {
        c = (s2 == nil) ? 0 : -1;
      }
      else if (s2 == nil) {
        c = 1;
      }
      else if ([((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(nil_chk(JreLoadVolatileId(&fields_)), i))) getLocale] == nil) {
        c = [s1 compareToWithId:s2];
      }
      else {
        c = [((JavaTextCollator *) nil_chk(IOSObjectArray_Get(nil_chk(JreLoadVolatileId(&collators_)), i))) compareWithNSString:s1 withNSString:s2];
      }
    }
    else {
      c = [((OrgApacheLuceneSearchFieldComparator *) nil_chk(IOSObjectArray_Get(nil_chk(JreLoadVolatileId(&comparators_)), i))) compareValuesWithId:IOSObjectArray_Get(nil_chk(((OrgApacheLuceneSearchFieldDoc *) nil_chk(docA))->fields_), i) withId:IOSObjectArray_Get(((OrgApacheLuceneSearchFieldDoc *) nil_chk(docB))->fields_, i)];
    }
    if ([((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(nil_chk(JreLoadVolatileId(&fields_)), i))) getReverse]) {
      c = -c;
    }
  }
  if (c == 0) return ((OrgApacheLuceneSearchFieldDoc *) nil_chk(docA))->doc_ > ((OrgApacheLuceneSearchFieldDoc *) nil_chk(docB))->doc_;
  return c > 0;
}

- (void)__javaClone:(OrgApacheLuceneSearchFieldDocSortedHitQueue *)original {
  [super __javaClone:original];
  JreCloneVolatileStrong(&fields_, &original->fields_);
  JreCloneVolatileStrong(&collators_, &original->collators_);
  JreCloneVolatileStrong(&comparators_, &original->comparators_);
}

- (void)dealloc {
  JreReleaseVolatile(&fields_);
  JreReleaseVolatile(&collators_);
  JreReleaseVolatile(&comparators_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
    { NULL, "V", 0x0, 1, 2, 3, -1, -1, -1 },
    { NULL, "[LOrgApacheLuceneSearchSortField;", 0x0, -1, -1, -1, -1, -1, -1 },
    { NULL, "[LJavaTextCollator;", 0x2, 4, 2, -1, -1, -1, -1 },
    { NULL, "Z", 0x14, 5, 6, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithInt:);
  methods[1].selector = @selector(setFieldsWithOrgApacheLuceneSearchSortFieldArray:);
  methods[2].selector = @selector(getFields);
  methods[3].selector = @selector(hasCollatorsWithOrgApacheLuceneSearchSortFieldArray:);
  methods[4].selector = @selector(lessThanWithId:withId:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "fields_", "[LOrgApacheLuceneSearchSortField;", .constantValue.asLong = 0, 0x40, -1, -1, -1, -1 },
    { "collators_", "[LJavaTextCollator;", .constantValue.asLong = 0, 0x40, -1, -1, -1, -1 },
    { "comparators_", "[LOrgApacheLuceneSearchFieldComparator;", .constantValue.asLong = 0, 0x40, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "I", "setFields", "[LOrgApacheLuceneSearchSortField;", "LJavaIoIOException;", "hasCollators", "lessThan", "LOrgApacheLuceneSearchFieldDoc;LOrgApacheLuceneSearchFieldDoc;", "Lorg/apache/lucene/util/PriorityQueue<Lorg/apache/lucene/search/FieldDoc;>;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchFieldDocSortedHitQueue = { "FieldDocSortedHitQueue", "org.apache.lucene.search", ptrTable, methods, fields, 7, 0x0, 5, 3, -1, -1, -1, 7, -1 };
  return &_OrgApacheLuceneSearchFieldDocSortedHitQueue;
}

@end

void OrgApacheLuceneSearchFieldDocSortedHitQueue_initWithInt_(OrgApacheLuceneSearchFieldDocSortedHitQueue *self, jint size) {
  OrgApacheLuceneUtilPriorityQueue_init(self);
  JreVolatileStrongAssign(&self->fields_, nil);
  JreVolatileStrongAssign(&self->collators_, nil);
  JreVolatileStrongAssign(&self->comparators_, nil);
  [self initialize__WithInt:size];
}

OrgApacheLuceneSearchFieldDocSortedHitQueue *new_OrgApacheLuceneSearchFieldDocSortedHitQueue_initWithInt_(jint size) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchFieldDocSortedHitQueue, initWithInt_, size)
}

OrgApacheLuceneSearchFieldDocSortedHitQueue *create_OrgApacheLuceneSearchFieldDocSortedHitQueue_initWithInt_(jint size) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchFieldDocSortedHitQueue, initWithInt_, size)
}

IOSObjectArray *OrgApacheLuceneSearchFieldDocSortedHitQueue_hasCollatorsWithOrgApacheLuceneSearchSortFieldArray_(OrgApacheLuceneSearchFieldDocSortedHitQueue *self, IOSObjectArray *fields) {
  if (fields == nil) return nil;
  IOSObjectArray *ret = [IOSObjectArray arrayWithLength:fields->size_ type:JavaTextCollator_class_()];
  for (jint i = 0; i < fields->size_; ++i) {
    JavaUtilLocale *locale = [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(fields, i))) getLocale];
    if (locale != nil) IOSObjectArray_Set(ret, i, JavaTextCollator_getInstanceWithJavaUtilLocale_(locale));
  }
  return ret;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchFieldDocSortedHitQueue)
