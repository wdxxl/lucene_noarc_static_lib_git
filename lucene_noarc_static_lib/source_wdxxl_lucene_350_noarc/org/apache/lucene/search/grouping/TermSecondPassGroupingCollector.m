//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: jar:file:wdxxl_lucene_350.jar!org/apache/lucene/search/grouping/TermSecondPassGroupingCollector.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/util/Collection.h"
#include "java/util/Map.h"
#include "org/apache/lucene/index/IndexReader.h"
#include "org/apache/lucene/search/FieldCache.h"
#include "org/apache/lucene/search/Sort.h"
#include "org/apache/lucene/search/grouping/AbstractSecondPassGroupingCollector.h"
#include "org/apache/lucene/search/grouping/SentinelIntSet.h"
#include "org/apache/lucene/search/grouping/TermSecondPassGroupingCollector.h"

@interface OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector () {
 @public
  OrgApacheLuceneSearchGroupingSentinelIntSet *ordSet_;
  OrgApacheLuceneSearchFieldCache_StringIndex *index_;
  NSString *groupField_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector, ordSet_, OrgApacheLuceneSearchGroupingSentinelIntSet *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector, index_, OrgApacheLuceneSearchFieldCache_StringIndex *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector, groupField_, NSString *)

@implementation OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector

- (instancetype)initWithNSString:(NSString *)groupField
          withJavaUtilCollection:(id<JavaUtilCollection>)groups
   withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)groupSort
   withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)withinGroupSort
                         withInt:(jint)maxDocsPerGroup
                     withBoolean:(jboolean)getScores
                     withBoolean:(jboolean)getMaxScores
                     withBoolean:(jboolean)fillSortFields {
  OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector_initWithNSString_withJavaUtilCollection_withOrgApacheLuceneSearchSort_withOrgApacheLuceneSearchSort_withInt_withBoolean_withBoolean_withBoolean_(self, groupField, groups, groupSort, withinGroupSort, maxDocsPerGroup, getScores, getMaxScores, fillSortFields);
  return self;
}

- (void)setNextReaderWithOrgApacheLuceneIndexIndexReader:(OrgApacheLuceneIndexIndexReader *)reader
                                                 withInt:(jint)docBase {
  [super setNextReaderWithOrgApacheLuceneIndexIndexReader:reader withInt:docBase];
  JreStrongAssign(&index_, [((id<OrgApacheLuceneSearchFieldCache>) nil_chk(JreLoadStatic(OrgApacheLuceneSearchFieldCache, DEFAULT))) getStringIndexWithOrgApacheLuceneIndexIndexReader:reader withNSString:groupField_]);
  [((OrgApacheLuceneSearchGroupingSentinelIntSet *) nil_chk(ordSet_)) clear];
  for (OrgApacheLuceneSearchGroupingAbstractSecondPassGroupingCollector_SearchGroupDocs * __strong group in nil_chk([((id<JavaUtilMap>) nil_chk(groupMap_)) values])) {
    jint ord = ((OrgApacheLuceneSearchGroupingAbstractSecondPassGroupingCollector_SearchGroupDocs *) nil_chk(group))->groupValue_ == nil ? 0 : [((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(index_)) binarySearchLookupWithNSString:group->groupValue_];
    if (ord >= 0) {
      IOSObjectArray_Set(nil_chk(groupDocs_), [ordSet_ putWithInt:ord], group);
    }
  }
}

- (OrgApacheLuceneSearchGroupingAbstractSecondPassGroupingCollector_SearchGroupDocs *)retrieveGroupWithInt:(jint)doc {
  jint slot = [((OrgApacheLuceneSearchGroupingSentinelIntSet *) nil_chk(ordSet_)) findWithInt:IOSIntArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(index_))->order_), doc)];
  if (slot >= 0) {
    return IOSObjectArray_Get(nil_chk(groupDocs_), slot);
  }
  return nil;
}

- (void)dealloc {
  RELEASE_(ordSet_);
  RELEASE_(index_);
  RELEASE_(groupField_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, 1, 2, -1, -1 },
    { NULL, "V", 0x1, 3, 4, 1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneSearchGroupingAbstractSecondPassGroupingCollector_SearchGroupDocs;", 0x4, 5, 6, 1, 7, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithNSString:withJavaUtilCollection:withOrgApacheLuceneSearchSort:withOrgApacheLuceneSearchSort:withInt:withBoolean:withBoolean:withBoolean:);
  methods[1].selector = @selector(setNextReaderWithOrgApacheLuceneIndexIndexReader:withInt:);
  methods[2].selector = @selector(retrieveGroupWithInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "ordSet_", "LOrgApacheLuceneSearchGroupingSentinelIntSet;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "index_", "LOrgApacheLuceneSearchFieldCache_StringIndex;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "groupField_", "LNSString;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LNSString;LJavaUtilCollection;LOrgApacheLuceneSearchSort;LOrgApacheLuceneSearchSort;IZZZ", "LJavaIoIOException;", "(Ljava/lang/String;Ljava/util/Collection<Lorg/apache/lucene/search/grouping/SearchGroup<Ljava/lang/String;>;>;Lorg/apache/lucene/search/Sort;Lorg/apache/lucene/search/Sort;IZZZ)V", "setNextReader", "LOrgApacheLuceneIndexIndexReader;I", "retrieveGroup", "I", "(I)Lorg/apache/lucene/search/grouping/AbstractSecondPassGroupingCollector$SearchGroupDocs<Ljava/lang/String;>;", "Lorg/apache/lucene/search/grouping/AbstractSecondPassGroupingCollector<Ljava/lang/String;>;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector = { "TermSecondPassGroupingCollector", "org.apache.lucene.search.grouping", ptrTable, methods, fields, 7, 0x1, 3, 3, -1, -1, -1, 8, -1 };
  return &_OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector;
}

@end

void OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector_initWithNSString_withJavaUtilCollection_withOrgApacheLuceneSearchSort_withOrgApacheLuceneSearchSort_withInt_withBoolean_withBoolean_withBoolean_(OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector *self, NSString *groupField, id<JavaUtilCollection> groups, OrgApacheLuceneSearchSort *groupSort, OrgApacheLuceneSearchSort *withinGroupSort, jint maxDocsPerGroup, jboolean getScores, jboolean getMaxScores, jboolean fillSortFields) {
  OrgApacheLuceneSearchGroupingAbstractSecondPassGroupingCollector_initWithJavaUtilCollection_withOrgApacheLuceneSearchSort_withOrgApacheLuceneSearchSort_withInt_withBoolean_withBoolean_withBoolean_(self, groups, groupSort, withinGroupSort, maxDocsPerGroup, getScores, getMaxScores, fillSortFields);
  JreStrongAssignAndConsume(&self->ordSet_, new_OrgApacheLuceneSearchGroupingSentinelIntSet_initWithInt_withInt_([((id<JavaUtilMap>) nil_chk(self->groupMap_)) size], -1));
  JreStrongAssign(&self->groupField_, groupField);
  JreStrongAssign(&self->groupDocs_, [IOSObjectArray arrayWithLength:((IOSIntArray *) nil_chk(self->ordSet_->keys_))->size_ type:OrgApacheLuceneSearchGroupingAbstractSecondPassGroupingCollector_SearchGroupDocs_class_()]);
}

OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector *new_OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector_initWithNSString_withJavaUtilCollection_withOrgApacheLuceneSearchSort_withOrgApacheLuceneSearchSort_withInt_withBoolean_withBoolean_withBoolean_(NSString *groupField, id<JavaUtilCollection> groups, OrgApacheLuceneSearchSort *groupSort, OrgApacheLuceneSearchSort *withinGroupSort, jint maxDocsPerGroup, jboolean getScores, jboolean getMaxScores, jboolean fillSortFields) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector, initWithNSString_withJavaUtilCollection_withOrgApacheLuceneSearchSort_withOrgApacheLuceneSearchSort_withInt_withBoolean_withBoolean_withBoolean_, groupField, groups, groupSort, withinGroupSort, maxDocsPerGroup, getScores, getMaxScores, fillSortFields)
}

OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector *create_OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector_initWithNSString_withJavaUtilCollection_withOrgApacheLuceneSearchSort_withOrgApacheLuceneSearchSort_withInt_withBoolean_withBoolean_withBoolean_(NSString *groupField, id<JavaUtilCollection> groups, OrgApacheLuceneSearchSort *groupSort, OrgApacheLuceneSearchSort *withinGroupSort, jint maxDocsPerGroup, jboolean getScores, jboolean getMaxScores, jboolean fillSortFields) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector, initWithNSString_withJavaUtilCollection_withOrgApacheLuceneSearchSort_withOrgApacheLuceneSearchSort_withInt_withBoolean_withBoolean_withBoolean_, groupField, groups, groupSort, withinGroupSort, maxDocsPerGroup, getScores, getMaxScores, fillSortFields)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermSecondPassGroupingCollector)
