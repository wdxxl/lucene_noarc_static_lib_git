//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: jar:file:wdxxl_lucene_350.jar!org/apache/lucene/search/grouping/TermAllGroupHeadsCollector.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/util/ArrayList.h"
#include "java/util/Collection.h"
#include "java/util/HashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "org/apache/lucene/index/IndexReader.h"
#include "org/apache/lucene/search/FieldCache.h"
#include "org/apache/lucene/search/FieldComparator.h"
#include "org/apache/lucene/search/Scorer.h"
#include "org/apache/lucene/search/Sort.h"
#include "org/apache/lucene/search/SortField.h"
#include "org/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector.h"
#include "org/apache/lucene/search/grouping/SentinelIntSet.h"
#include "org/apache/lucene/search/grouping/TermAllGroupHeadsCollector.h"

@interface OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector ()

+ (jboolean)needGeneralImplWithOrgApacheLuceneSearchSortField:(OrgApacheLuceneSearchSortField *)sortField;

@end

inline jint OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_get_DEFAULT_INITIAL_SIZE();
#define OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_DEFAULT_INITIAL_SIZE 128
J2OBJC_STATIC_FIELD_CONSTANT(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector, DEFAULT_INITIAL_SIZE, jint)

__attribute__((unused)) static jboolean OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_needGeneralImplWithOrgApacheLuceneSearchSortField_(OrgApacheLuceneSearchSortField *sortField);

@interface OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector () {
 @public
  OrgApacheLuceneSearchSort *sortWithinGroup_;
  id<JavaUtilMap> groups_;
  OrgApacheLuceneSearchScorer *scorer_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector, sortWithinGroup_, OrgApacheLuceneSearchSort *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector, groups_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector, scorer_, OrgApacheLuceneSearchScorer *)

@interface OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead () {
 @public
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *this$0_;
}

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *)outer$
                                                                                                 withNSString:(NSString *)groupValue
                                                                                withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sort
                                                                                                      withInt:(jint)doc;

@end

__attribute__((unused)) static void OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withNSString_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *outer$, NSString *groupValue, OrgApacheLuceneSearchSort *sort, jint doc);

__attribute__((unused)) static OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withNSString_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *outer$, NSString *groupValue, OrgApacheLuceneSearchSort *sort, jint doc) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withNSString_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *outer$, NSString *groupValue, OrgApacheLuceneSearchSort *sort, jint doc);

@interface OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector () {
 @public
  OrgApacheLuceneSearchGroupingSentinelIntSet *ordSet_;
  id<JavaUtilList> collectedGroups_;
  IOSObjectArray *fields_;
  IOSObjectArray *sortsIndex_;
  OrgApacheLuceneSearchScorer *scorer_;
  IOSObjectArray *segmentGroupHeads_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector, ordSet_, OrgApacheLuceneSearchGroupingSentinelIntSet *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector, collectedGroups_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector, fields_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector, sortsIndex_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector, scorer_, OrgApacheLuceneSearchScorer *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector, segmentGroupHeads_, IOSObjectArray *)

@interface OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead () {
 @public
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *this$0_;
}

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *)outer$
                                                                                                       withInt:(jint)doc
                                                                                                  withNSString:(NSString *)groupValue;

@end

__attribute__((unused)) static void OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue);

__attribute__((unused)) static OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue);

@interface OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector () {
 @public
  OrgApacheLuceneSearchGroupingSentinelIntSet *ordSet_;
  id<JavaUtilList> collectedGroups_;
  IOSObjectArray *fields_;
  IOSObjectArray *sortsIndex_;
  IOSObjectArray *segmentGroupHeads_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector, ordSet_, OrgApacheLuceneSearchGroupingSentinelIntSet *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector, collectedGroups_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector, fields_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector, sortsIndex_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector, segmentGroupHeads_, IOSObjectArray *)

@interface OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead () {
 @public
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *this$0_;
}

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *)outer$
                                                                                                  withInt:(jint)doc
                                                                                             withNSString:(NSString *)groupValue;

@end

__attribute__((unused)) static void OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue);

__attribute__((unused)) static OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue);

@interface OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector () {
 @public
  OrgApacheLuceneSearchGroupingSentinelIntSet *ordSet_;
  id<JavaUtilList> collectedGroups_;
  IOSObjectArray *fields_;
  OrgApacheLuceneSearchScorer *scorer_;
  IOSObjectArray *segmentGroupHeads_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector, ordSet_, OrgApacheLuceneSearchGroupingSentinelIntSet *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector, collectedGroups_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector, fields_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector, scorer_, OrgApacheLuceneSearchScorer *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector, segmentGroupHeads_, IOSObjectArray *)

@interface OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead () {
 @public
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *this$0_;
}

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *)outer$
                                                                                                    withInt:(jint)doc
                                                                                               withNSString:(NSString *)groupValue;

@end

__attribute__((unused)) static void OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue);

__attribute__((unused)) static OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue);

@implementation OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector

- (instancetype)initWithNSString:(NSString *)groupField
                         withInt:(jint)numberOfSorts {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_initWithNSString_withInt_(self, groupField, numberOfSorts);
  return self;
}

+ (OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector *)createWithNSString:(NSString *)groupField
                                                      withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sortWithinGroup {
  return OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_createWithNSString_withOrgApacheLuceneSearchSort_(groupField, sortWithinGroup);
}

+ (OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector *)createWithNSString:(NSString *)groupField
                                                      withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sortWithinGroup
                                                                            withInt:(jint)initialSize {
  return OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_createWithNSString_withOrgApacheLuceneSearchSort_withInt_(groupField, sortWithinGroup, initialSize);
}

+ (jboolean)needGeneralImplWithOrgApacheLuceneSearchSortField:(OrgApacheLuceneSearchSortField *)sortField {
  return OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_needGeneralImplWithOrgApacheLuceneSearchSortField_(sortField);
}

- (void)dealloc {
  RELEASE_(groupField_);
  RELEASE_(groupIndex_);
  RELEASE_(indexReader_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x4, -1, 0, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector;", 0x9, 1, 2, 3, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector;", 0x9, 1, 4, 3, -1, -1, -1 },
    { NULL, "Z", 0xa, 5, 6, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithNSString:withInt:);
  methods[1].selector = @selector(createWithNSString:withOrgApacheLuceneSearchSort:);
  methods[2].selector = @selector(createWithNSString:withOrgApacheLuceneSearchSort:withInt:);
  methods[3].selector = @selector(needGeneralImplWithOrgApacheLuceneSearchSortField:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "DEFAULT_INITIAL_SIZE", "I", .constantValue.asInt = OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_DEFAULT_INITIAL_SIZE, 0x1a, -1, -1, -1, -1 },
    { "groupField_", "LNSString;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "groupIndex_", "LOrgApacheLuceneSearchFieldCache_StringIndex;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "indexReader_", "LOrgApacheLuceneIndexIndexReader;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "docBase_", "I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LNSString;I", "create", "LNSString;LOrgApacheLuceneSearchSort;", "LJavaIoIOException;", "LNSString;LOrgApacheLuceneSearchSort;I", "needGeneralImpl", "LOrgApacheLuceneSearchSortField;", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector;LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector;LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector;LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector;", "<GH:Lorg/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector$GroupHead;>Lorg/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector<TGH;>;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector = { "TermAllGroupHeadsCollector", "org.apache.lucene.search.grouping", ptrTable, methods, fields, 7, 0x401, 4, 5, -1, 7, -1, 8, -1 };
  return &_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector;
}

@end

void OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_initWithNSString_withInt_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector *self, NSString *groupField, jint numberOfSorts) {
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_initWithInt_(self, numberOfSorts);
  JreStrongAssign(&self->groupField_, groupField);
}

OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector *OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_createWithNSString_withOrgApacheLuceneSearchSort_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup) {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_initialize();
  return OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_createWithNSString_withOrgApacheLuceneSearchSort_withInt_(groupField, sortWithinGroup, OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_DEFAULT_INITIAL_SIZE);
}

OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector *OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_createWithNSString_withOrgApacheLuceneSearchSort_withInt_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_initialize();
  jboolean sortAllScore = true;
  jboolean sortAllFieldValue = true;
  {
    IOSObjectArray *a__ = [((OrgApacheLuceneSearchSort *) nil_chk(sortWithinGroup)) getSort];
    OrgApacheLuceneSearchSortField * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    OrgApacheLuceneSearchSortField * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      OrgApacheLuceneSearchSortField *sortField = *b__++;
      if ([((OrgApacheLuceneSearchSortField *) nil_chk(sortField)) getType] == OrgApacheLuceneSearchSortField_SCORE) {
        sortAllFieldValue = false;
      }
      else if (OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_needGeneralImplWithOrgApacheLuceneSearchSortField_(sortField)) {
        return create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_(groupField, sortWithinGroup);
      }
      else {
        sortAllScore = false;
      }
    }
  }
  if (sortAllScore) {
    return create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(groupField, sortWithinGroup, initialSize);
  }
  else if (sortAllFieldValue) {
    return create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(groupField, sortWithinGroup, initialSize);
  }
  else {
    return create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(groupField, sortWithinGroup, initialSize);
  }
}

jboolean OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_needGeneralImplWithOrgApacheLuceneSearchSortField_(OrgApacheLuceneSearchSortField *sortField) {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_initialize();
  jint sortType = [((OrgApacheLuceneSearchSortField *) nil_chk(sortField)) getType];
  return sortType != OrgApacheLuceneSearchSortField_STRING_VAL && sortType != OrgApacheLuceneSearchSortField_STRING && sortType != OrgApacheLuceneSearchSortField_SCORE;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector)

@implementation OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector

- (instancetype)initWithNSString:(NSString *)groupField
   withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sortWithinGroup {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_(self, groupField, sortWithinGroup);
  return self;
}

- (void)retrieveGroupHeadAndAddIfNotExistWithInt:(jint)doc {
  jint ord = IOSIntArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(groupIndex_))->order_), doc);
  NSString *groupValue = ord == 0 ? nil : IOSObjectArray_Get(nil_chk(groupIndex_->lookup_), ord);
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *groupHead = [((id<JavaUtilMap>) nil_chk(groups_)) getWithId:groupValue];
  if (groupHead == nil) {
    groupHead = create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withNSString_withOrgApacheLuceneSearchSort_withInt_(self, groupValue, sortWithinGroup_, doc);
    [groups_ putWithId:groupValue == nil ? nil : groupValue withId:groupHead];
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = true;
  }
  else {
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = false;
  }
  JreStrongAssign(&temporalResult_->groupHead_, groupHead);
}

- (id<JavaUtilCollection>)getCollectedGroupHeads {
  return [((id<JavaUtilMap>) nil_chk(groups_)) values];
}

- (void)setNextReaderWithOrgApacheLuceneIndexIndexReader:(OrgApacheLuceneIndexIndexReader *)reader
                                                 withInt:(jint)docBase {
  JreStrongAssign(&self->indexReader_, reader);
  self->docBase_ = docBase;
  JreStrongAssign(&groupIndex_, [((id<OrgApacheLuceneSearchFieldCache>) nil_chk(JreLoadStatic(OrgApacheLuceneSearchFieldCache, DEFAULT))) getStringIndexWithOrgApacheLuceneIndexIndexReader:reader withNSString:groupField_]);
  for (OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead * __strong groupHead in nil_chk([((id<JavaUtilMap>) nil_chk(groups_)) values])) {
    for (jint i = 0; i < ((IOSObjectArray *) nil_chk(((OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *) nil_chk(groupHead))->comparators_))->size_; i++) {
      [((OrgApacheLuceneSearchFieldComparator *) nil_chk(IOSObjectArray_Get(groupHead->comparators_, i))) setNextReaderWithOrgApacheLuceneIndexIndexReader:reader withInt:docBase];
    }
  }
}

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer {
  JreStrongAssign(&self->scorer_, scorer);
  for (OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead * __strong groupHead in nil_chk([((id<JavaUtilMap>) nil_chk(groups_)) values])) {
    {
      IOSObjectArray *a__ = ((OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *) nil_chk(groupHead))->comparators_;
      OrgApacheLuceneSearchFieldComparator * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
      OrgApacheLuceneSearchFieldComparator * const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        OrgApacheLuceneSearchFieldComparator *comparator = *b__++;
        [((OrgApacheLuceneSearchFieldComparator *) nil_chk(comparator)) setScorerWithOrgApacheLuceneSearchScorer:scorer];
      }
    }
  }
}

- (void)dealloc {
  RELEASE_(sortWithinGroup_);
  RELEASE_(groups_);
  RELEASE_(scorer_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, 1, -1, -1, -1 },
    { NULL, "V", 0x4, 2, 3, 1, -1, -1, -1 },
    { NULL, "LJavaUtilCollection;", 0x4, -1, -1, -1, 4, -1, -1 },
    { NULL, "V", 0x1, 5, 6, 1, -1, -1, -1 },
    { NULL, "V", 0x1, 7, 8, 1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithNSString:withOrgApacheLuceneSearchSort:);
  methods[1].selector = @selector(retrieveGroupHeadAndAddIfNotExistWithInt:);
  methods[2].selector = @selector(getCollectedGroupHeads);
  methods[3].selector = @selector(setNextReaderWithOrgApacheLuceneIndexIndexReader:withInt:);
  methods[4].selector = @selector(setScorerWithOrgApacheLuceneSearchScorer:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "sortWithinGroup_", "LOrgApacheLuceneSearchSort;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "groups_", "LJavaUtilMap;", .constantValue.asLong = 0, 0x12, -1, -1, 9, -1 },
    { "scorer_", "LOrgApacheLuceneSearchScorer;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LNSString;LOrgApacheLuceneSearchSort;", "LJavaIoIOException;", "retrieveGroupHeadAndAddIfNotExist", "I", "()Ljava/util/Collection<Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector$GeneralAllGroupHeadsCollector$GroupHead;>;", "setNextReader", "LOrgApacheLuceneIndexIndexReader;I", "setScorer", "LOrgApacheLuceneSearchScorer;", "Ljava/util/Map<Ljava/lang/String;Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector$GeneralAllGroupHeadsCollector$GroupHead;>;", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector;", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead;", "Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector<Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector$GeneralAllGroupHeadsCollector$GroupHead;>;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector = { "GeneralAllGroupHeadsCollector", "org.apache.lucene.search.grouping", ptrTable, methods, fields, 7, 0x8, 5, 3, 10, 11, -1, 12, -1 };
  return &_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector;
}

@end

void OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *self, NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup) {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_initWithNSString_withInt_(self, groupField, ((IOSObjectArray *) nil_chk([((OrgApacheLuceneSearchSort *) nil_chk(sortWithinGroup)) getSort]))->size_);
  JreStrongAssign(&self->sortWithinGroup_, sortWithinGroup);
  JreStrongAssignAndConsume(&self->groups_, new_JavaUtilHashMap_init());
  IOSObjectArray *sortFields = [sortWithinGroup getSort];
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(sortFields))->size_; i++) {
    *IOSIntArray_GetRef(nil_chk(self->reversed_), i) = [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(sortFields, i))) getReverse] ? -1 : 1;
  }
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *new_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector, initWithNSString_withOrgApacheLuceneSearchSort_, groupField, sortWithinGroup)
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector, initWithNSString_withOrgApacheLuceneSearchSort_, groupField, sortWithinGroup)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector)

@implementation OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *)outer$
                                                                                                 withNSString:(NSString *)groupValue
                                                                                withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sort
                                                                                                      withInt:(jint)doc {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withNSString_withOrgApacheLuceneSearchSort_withInt_(self, outer$, groupValue, sort, doc);
  return self;
}

- (jint)compareWithInt:(jint)compIDX
               withInt:(jint)doc {
  return [((OrgApacheLuceneSearchFieldComparator *) nil_chk(IOSObjectArray_Get(nil_chk(comparators_), compIDX))) compareBottomWithInt:doc];
}

- (void)updateDocHeadWithInt:(jint)doc {
  {
    IOSObjectArray *a__ = comparators_;
    OrgApacheLuceneSearchFieldComparator * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    OrgApacheLuceneSearchFieldComparator * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      OrgApacheLuceneSearchFieldComparator *comparator = *b__++;
      [((OrgApacheLuceneSearchFieldComparator *) nil_chk(comparator)) copy__WithInt:0 withInt:doc];
      [comparator setBottomWithInt:0];
    }
  }
  self->doc_ = doc + this$0_->docBase_;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(comparators_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x2, -1, 0, 1, -1, -1, -1 },
    { NULL, "I", 0x1, 2, 3, 1, -1, -1, -1 },
    { NULL, "V", 0x1, 4, 5, 1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector:withNSString:withOrgApacheLuceneSearchSort:withInt:);
  methods[1].selector = @selector(compareWithInt:withInt:);
  methods[2].selector = @selector(updateDocHeadWithInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "comparators_", "[LOrgApacheLuceneSearchFieldComparator;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LNSString;LOrgApacheLuceneSearchSort;I", "LJavaIoIOException;", "compare", "II", "updateDocHead", "I", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector;", "Lorg/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector$GroupHead<Ljava/lang/String;>;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead = { "GroupHead", "org.apache.lucene.search.grouping", ptrTable, methods, fields, 7, 0x0, 3, 2, 6, -1, -1, 7, -1 };
  return &_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead;
}

@end

void OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withNSString_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *outer$, NSString *groupValue, OrgApacheLuceneSearchSort *sort, jint doc) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead_initWithId_withInt_(self, groupValue, doc + outer$->docBase_);
  IOSObjectArray *sortFields = [((OrgApacheLuceneSearchSort *) nil_chk(sort)) getSort];
  JreStrongAssignAndConsume(&self->comparators_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(sortFields))->size_ type:OrgApacheLuceneSearchFieldComparator_class_()]);
  for (jint i = 0; i < sortFields->size_; i++) {
    IOSObjectArray_Set(self->comparators_, i, [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(sortFields, i))) getComparatorWithInt:1 withInt:i]);
    [((OrgApacheLuceneSearchFieldComparator *) nil_chk(IOSObjectArray_Get(self->comparators_, i))) setNextReaderWithOrgApacheLuceneIndexIndexReader:outer$->indexReader_ withInt:outer$->docBase_];
    [((OrgApacheLuceneSearchFieldComparator *) nil_chk(IOSObjectArray_Get(self->comparators_, i))) setScorerWithOrgApacheLuceneSearchScorer:outer$->scorer_];
    [((OrgApacheLuceneSearchFieldComparator *) nil_chk(IOSObjectArray_Get(self->comparators_, i))) copy__WithInt:0 withInt:doc];
    [((OrgApacheLuceneSearchFieldComparator *) nil_chk(IOSObjectArray_Get(self->comparators_, i))) setBottomWithInt:0];
  }
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withNSString_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *outer$, NSString *groupValue, OrgApacheLuceneSearchSort *sort, jint doc) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead, initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withNSString_withOrgApacheLuceneSearchSort_withInt_, outer$, groupValue, sort, doc)
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withNSString_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *outer$, NSString *groupValue, OrgApacheLuceneSearchSort *sort, jint doc) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead, initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withNSString_withOrgApacheLuceneSearchSort_withInt_, outer$, groupValue, sort, doc)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead)

@implementation OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector

- (instancetype)initWithNSString:(NSString *)groupField
   withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sortWithinGroup
                         withInt:(jint)initialSize {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(self, groupField, sortWithinGroup, initialSize);
  return self;
}

- (id<JavaUtilCollection>)getCollectedGroupHeads {
  return collectedGroups_;
}

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer {
  JreStrongAssign(&self->scorer_, scorer);
}

- (void)retrieveGroupHeadAndAddIfNotExistWithInt:(jint)doc {
  jint key = IOSIntArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(groupIndex_))->order_), doc);
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *groupHead;
  if (![((OrgApacheLuceneSearchGroupingSentinelIntSet *) nil_chk(ordSet_)) existsWithInt:key]) {
    [ordSet_ putWithInt:key];
    NSString *term = key == 0 ? nil : IOSObjectArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(groupIndex_))->lookup_), key);
    groupHead = create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withNSString_(self, doc, term);
    [((id<JavaUtilList>) nil_chk(collectedGroups_)) addWithId:groupHead];
    IOSObjectArray_Set(nil_chk(segmentGroupHeads_), key, groupHead);
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = true;
  }
  else {
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = false;
    groupHead = IOSObjectArray_Get(nil_chk(segmentGroupHeads_), key);
  }
  JreStrongAssign(&temporalResult_->groupHead_, groupHead);
}

- (void)setNextReaderWithOrgApacheLuceneIndexIndexReader:(OrgApacheLuceneIndexIndexReader *)reader
                                                 withInt:(jint)docBase {
  JreStrongAssign(&self->indexReader_, reader);
  self->docBase_ = docBase;
  JreStrongAssign(&groupIndex_, [((id<OrgApacheLuceneSearchFieldCache>) nil_chk(JreLoadStatic(OrgApacheLuceneSearchFieldCache, DEFAULT))) getStringIndexWithOrgApacheLuceneIndexIndexReader:reader withNSString:groupField_]);
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(fields_))->size_; i++) {
    if ([((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(fields_, i))) getType] == OrgApacheLuceneSearchSortField_SCORE) {
      continue;
    }
    IOSObjectArray_Set(nil_chk(sortsIndex_), i, [JreLoadStatic(OrgApacheLuceneSearchFieldCache, DEFAULT) getStringIndexWithOrgApacheLuceneIndexIndexReader:reader withNSString:[((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(fields_, i))) getField]]);
  }
  [((OrgApacheLuceneSearchGroupingSentinelIntSet *) nil_chk(ordSet_)) clear];
  JreStrongAssignAndConsume(&segmentGroupHeads_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(groupIndex_))->lookup_))->size_ type:OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_class_()]);
  for (OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead * __strong collectedGroup in nil_chk(collectedGroups_)) {
    jint ord = [((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(groupIndex_)) binarySearchLookupWithNSString:((OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *) nil_chk(collectedGroup))->groupValue_];
    if (ord >= 0) {
      [ordSet_ putWithInt:ord];
      IOSObjectArray_Set(nil_chk(segmentGroupHeads_), ord, collectedGroup);
      for (jint i = 0; i < ((IOSObjectArray *) nil_chk(sortsIndex_))->size_; i++) {
        if ([((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(fields_, i))) getType] == OrgApacheLuceneSearchSortField_SCORE) {
          continue;
        }
        *IOSIntArray_GetRef(nil_chk(collectedGroup->sortOrds_), i) = [((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(nil_chk(sortsIndex_), i))) binarySearchLookupWithNSString:IOSObjectArray_Get(nil_chk(collectedGroup->sortValues_), i)];
      }
    }
  }
}

- (void)dealloc {
  RELEASE_(ordSet_);
  RELEASE_(collectedGroups_);
  RELEASE_(fields_);
  RELEASE_(sortsIndex_);
  RELEASE_(scorer_);
  RELEASE_(segmentGroupHeads_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
    { NULL, "LJavaUtilCollection;", 0x4, -1, -1, -1, 1, -1, -1 },
    { NULL, "V", 0x1, 2, 3, 4, -1, -1, -1 },
    { NULL, "V", 0x4, 5, 6, 4, -1, -1, -1 },
    { NULL, "V", 0x1, 7, 8, 4, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithNSString:withOrgApacheLuceneSearchSort:withInt:);
  methods[1].selector = @selector(getCollectedGroupHeads);
  methods[2].selector = @selector(setScorerWithOrgApacheLuceneSearchScorer:);
  methods[3].selector = @selector(retrieveGroupHeadAndAddIfNotExistWithInt:);
  methods[4].selector = @selector(setNextReaderWithOrgApacheLuceneIndexIndexReader:withInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "ordSet_", "LOrgApacheLuceneSearchGroupingSentinelIntSet;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "collectedGroups_", "LJavaUtilList;", .constantValue.asLong = 0, 0x12, -1, -1, 9, -1 },
    { "fields_", "[LOrgApacheLuceneSearchSortField;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "sortsIndex_", "[LOrgApacheLuceneSearchFieldCache_StringIndex;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "scorer_", "LOrgApacheLuceneSearchScorer;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "segmentGroupHeads_", "[LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LNSString;LOrgApacheLuceneSearchSort;I", "()Ljava/util/Collection<Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector$OrdScoreAllGroupHeadsCollector$GroupHead;>;", "setScorer", "LOrgApacheLuceneSearchScorer;", "LJavaIoIOException;", "retrieveGroupHeadAndAddIfNotExist", "I", "setNextReader", "LOrgApacheLuceneIndexIndexReader;I", "Ljava/util/List<Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector$OrdScoreAllGroupHeadsCollector$GroupHead;>;", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector;", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead;", "Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector<Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector$OrdScoreAllGroupHeadsCollector$GroupHead;>;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector = { "OrdScoreAllGroupHeadsCollector", "org.apache.lucene.search.grouping", ptrTable, methods, fields, 7, 0x8, 5, 6, 10, 11, -1, 12, -1 };
  return &_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector;
}

@end

void OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *self, NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_initWithNSString_withInt_(self, groupField, ((IOSObjectArray *) nil_chk([((OrgApacheLuceneSearchSort *) nil_chk(sortWithinGroup)) getSort]))->size_);
  JreStrongAssignAndConsume(&self->ordSet_, new_OrgApacheLuceneSearchGroupingSentinelIntSet_initWithInt_withInt_(initialSize, -1));
  JreStrongAssignAndConsume(&self->collectedGroups_, new_JavaUtilArrayList_initWithInt_(initialSize));
  IOSObjectArray *sortFields = [sortWithinGroup getSort];
  JreStrongAssignAndConsume(&self->fields_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(sortFields))->size_ type:OrgApacheLuceneSearchSortField_class_()]);
  JreStrongAssignAndConsume(&self->sortsIndex_, [IOSObjectArray newArrayWithLength:sortFields->size_ type:OrgApacheLuceneSearchFieldCache_StringIndex_class_()]);
  for (jint i = 0; i < sortFields->size_; i++) {
    *IOSIntArray_GetRef(nil_chk(self->reversed_), i) = [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(sortFields, i))) getReverse] ? -1 : 1;
    IOSObjectArray_Set(self->fields_, i, IOSObjectArray_Get(sortFields, i));
  }
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *new_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector, initWithNSString_withOrgApacheLuceneSearchSort_withInt_, groupField, sortWithinGroup, initialSize)
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector, initWithNSString_withOrgApacheLuceneSearchSort_withInt_, groupField, sortWithinGroup, initialSize)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector)

@implementation OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *)outer$
                                                                                                       withInt:(jint)doc
                                                                                                  withNSString:(NSString *)groupValue {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withNSString_(self, outer$, doc, groupValue);
  return self;
}

- (jint)compareWithInt:(jint)compIDX
               withInt:(jint)doc {
  if ([((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(nil_chk(this$0_->fields_), compIDX))) getType] == OrgApacheLuceneSearchSortField_SCORE) {
    jfloat score = [((OrgApacheLuceneSearchScorer *) nil_chk(this$0_->scorer_)) score];
    if (IOSFloatArray_Get(nil_chk(scores_), compIDX) < score) {
      return 1;
    }
    else if (IOSFloatArray_Get(scores_, compIDX) > score) {
      return -1;
    }
    return 0;
  }
  else {
    if (IOSIntArray_Get(nil_chk(sortOrds_), compIDX) < 0) {
      NSString *val1 = IOSObjectArray_Get(nil_chk(sortValues_), compIDX);
      NSString *val2 = IOSObjectArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(nil_chk(this$0_->sortsIndex_), compIDX)))->lookup_), IOSIntArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(this$0_->sortsIndex_, compIDX)))->order_), doc));
      if (val1 == nil) {
        if (val2 == nil) {
          return 0;
        }
        return -1;
      }
      else if (val2 == nil) {
        return 1;
      }
      return [val1 compareToWithId:val2];
    }
    else {
      return IOSIntArray_Get(sortOrds_, compIDX) - IOSIntArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(nil_chk(this$0_->sortsIndex_), compIDX)))->order_), doc);
    }
  }
}

- (void)updateDocHeadWithInt:(jint)doc {
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(this$0_->sortsIndex_))->size_; i++) {
    if ([((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(nil_chk(this$0_->fields_), i))) getType] == OrgApacheLuceneSearchSortField_SCORE) {
      *IOSFloatArray_GetRef(nil_chk(scores_), i) = [((OrgApacheLuceneSearchScorer *) nil_chk(this$0_->scorer_)) score];
    }
    else {
      IOSObjectArray_Set(nil_chk(sortValues_), i, IOSObjectArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(nil_chk(this$0_->sortsIndex_), i)))->lookup_), IOSIntArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(this$0_->sortsIndex_, i)))->order_), doc)));
      *IOSIntArray_GetRef(nil_chk(sortOrds_), i) = IOSIntArray_Get(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(this$0_->sortsIndex_, i)))->order_, doc);
    }
  }
  self->doc_ = doc + this$0_->docBase_;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(sortValues_);
  RELEASE_(sortOrds_);
  RELEASE_(scores_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x2, -1, 0, 1, -1, -1, -1 },
    { NULL, "I", 0x1, 2, 3, 1, -1, -1, -1 },
    { NULL, "V", 0x1, 4, 5, 1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector:withInt:withNSString:);
  methods[1].selector = @selector(compareWithInt:withInt:);
  methods[2].selector = @selector(updateDocHeadWithInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "sortValues_", "[LNSString;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "sortOrds_", "[I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "scores_", "[F", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "ILNSString;", "LJavaIoIOException;", "compare", "II", "updateDocHead", "I", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector;", "Lorg/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector$GroupHead<Ljava/lang/String;>;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead = { "GroupHead", "org.apache.lucene.search.grouping", ptrTable, methods, fields, 7, 0x0, 3, 4, 6, -1, -1, 7, -1 };
  return &_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead;
}

@end

void OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead_initWithId_withInt_(self, groupValue, doc + outer$->docBase_);
  JreStrongAssignAndConsume(&self->sortValues_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(outer$->sortsIndex_))->size_ type:NSString_class_()]);
  JreStrongAssignAndConsume(&self->sortOrds_, [IOSIntArray newArrayWithLength:outer$->sortsIndex_->size_]);
  JreStrongAssignAndConsume(&self->scores_, [IOSFloatArray newArrayWithLength:outer$->sortsIndex_->size_]);
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(outer$->sortsIndex_))->size_; i++) {
    if ([((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(nil_chk(outer$->fields_), i))) getType] == OrgApacheLuceneSearchSortField_SCORE) {
      *IOSFloatArray_GetRef(nil_chk(self->scores_), i) = [((OrgApacheLuceneSearchScorer *) nil_chk(outer$->scorer_)) score];
    }
    else {
      IOSObjectArray_Set(nil_chk(self->sortValues_), i, IOSObjectArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(nil_chk(outer$->sortsIndex_), i)))->lookup_), IOSIntArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(outer$->sortsIndex_, i)))->order_), doc)));
      *IOSIntArray_GetRef(nil_chk(self->sortOrds_), i) = IOSIntArray_Get(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(outer$->sortsIndex_, i)))->order_, doc);
    }
  }
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead, initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withNSString_, outer$, doc, groupValue)
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead, initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withNSString_, outer$, doc, groupValue)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead)

@implementation OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector

- (instancetype)initWithNSString:(NSString *)groupField
   withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sortWithinGroup
                         withInt:(jint)initialSize {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(self, groupField, sortWithinGroup, initialSize);
  return self;
}

- (id<JavaUtilCollection>)getCollectedGroupHeads {
  return collectedGroups_;
}

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer {
}

- (void)retrieveGroupHeadAndAddIfNotExistWithInt:(jint)doc {
  jint key = IOSIntArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(groupIndex_))->order_), doc);
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *groupHead;
  if (![((OrgApacheLuceneSearchGroupingSentinelIntSet *) nil_chk(ordSet_)) existsWithInt:key]) {
    [ordSet_ putWithInt:key];
    NSString *term = key == 0 ? nil : IOSObjectArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(groupIndex_))->lookup_), key);
    groupHead = create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withNSString_(self, doc, term);
    [((id<JavaUtilList>) nil_chk(collectedGroups_)) addWithId:groupHead];
    IOSObjectArray_Set(nil_chk(segmentGroupHeads_), key, groupHead);
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = true;
  }
  else {
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = false;
    groupHead = IOSObjectArray_Get(nil_chk(segmentGroupHeads_), key);
  }
  JreStrongAssign(&temporalResult_->groupHead_, groupHead);
}

- (void)setNextReaderWithOrgApacheLuceneIndexIndexReader:(OrgApacheLuceneIndexIndexReader *)reader
                                                 withInt:(jint)docBase {
  JreStrongAssign(&self->indexReader_, reader);
  self->docBase_ = docBase;
  JreStrongAssign(&groupIndex_, [((id<OrgApacheLuceneSearchFieldCache>) nil_chk(JreLoadStatic(OrgApacheLuceneSearchFieldCache, DEFAULT))) getStringIndexWithOrgApacheLuceneIndexIndexReader:reader withNSString:groupField_]);
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(fields_))->size_; i++) {
    IOSObjectArray_Set(nil_chk(sortsIndex_), i, [JreLoadStatic(OrgApacheLuceneSearchFieldCache, DEFAULT) getStringIndexWithOrgApacheLuceneIndexIndexReader:reader withNSString:[((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(fields_, i))) getField]]);
  }
  [((OrgApacheLuceneSearchGroupingSentinelIntSet *) nil_chk(ordSet_)) clear];
  JreStrongAssignAndConsume(&segmentGroupHeads_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(groupIndex_))->lookup_))->size_ type:OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_class_()]);
  for (OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead * __strong collectedGroup in nil_chk(collectedGroups_)) {
    jint groupOrd = [((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(groupIndex_)) binarySearchLookupWithNSString:((OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *) nil_chk(collectedGroup))->groupValue_];
    if (groupOrd >= 0) {
      [ordSet_ putWithInt:groupOrd];
      IOSObjectArray_Set(nil_chk(segmentGroupHeads_), groupOrd, collectedGroup);
      for (jint i = 0; i < ((IOSObjectArray *) nil_chk(sortsIndex_))->size_; i++) {
        *IOSIntArray_GetRef(nil_chk(collectedGroup->sortOrds_), i) = [((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(sortsIndex_, i))) binarySearchLookupWithNSString:IOSObjectArray_Get(nil_chk(collectedGroup->sortValues_), i)];
      }
    }
  }
}

- (void)dealloc {
  RELEASE_(ordSet_);
  RELEASE_(collectedGroups_);
  RELEASE_(fields_);
  RELEASE_(sortsIndex_);
  RELEASE_(segmentGroupHeads_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
    { NULL, "LJavaUtilCollection;", 0x4, -1, -1, -1, 1, -1, -1 },
    { NULL, "V", 0x1, 2, 3, 4, -1, -1, -1 },
    { NULL, "V", 0x4, 5, 6, 4, -1, -1, -1 },
    { NULL, "V", 0x1, 7, 8, 4, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithNSString:withOrgApacheLuceneSearchSort:withInt:);
  methods[1].selector = @selector(getCollectedGroupHeads);
  methods[2].selector = @selector(setScorerWithOrgApacheLuceneSearchScorer:);
  methods[3].selector = @selector(retrieveGroupHeadAndAddIfNotExistWithInt:);
  methods[4].selector = @selector(setNextReaderWithOrgApacheLuceneIndexIndexReader:withInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "ordSet_", "LOrgApacheLuceneSearchGroupingSentinelIntSet;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "collectedGroups_", "LJavaUtilList;", .constantValue.asLong = 0, 0x12, -1, -1, 9, -1 },
    { "fields_", "[LOrgApacheLuceneSearchSortField;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "sortsIndex_", "[LOrgApacheLuceneSearchFieldCache_StringIndex;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "segmentGroupHeads_", "[LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LNSString;LOrgApacheLuceneSearchSort;I", "()Ljava/util/Collection<Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector$OrdAllGroupHeadsCollector$GroupHead;>;", "setScorer", "LOrgApacheLuceneSearchScorer;", "LJavaIoIOException;", "retrieveGroupHeadAndAddIfNotExist", "I", "setNextReader", "LOrgApacheLuceneIndexIndexReader;I", "Ljava/util/List<Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector$OrdAllGroupHeadsCollector$GroupHead;>;", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector;", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead;", "Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector<Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector$OrdAllGroupHeadsCollector$GroupHead;>;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector = { "OrdAllGroupHeadsCollector", "org.apache.lucene.search.grouping", ptrTable, methods, fields, 7, 0x8, 5, 5, 10, 11, -1, 12, -1 };
  return &_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector;
}

@end

void OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *self, NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_initWithNSString_withInt_(self, groupField, ((IOSObjectArray *) nil_chk([((OrgApacheLuceneSearchSort *) nil_chk(sortWithinGroup)) getSort]))->size_);
  JreStrongAssignAndConsume(&self->ordSet_, new_OrgApacheLuceneSearchGroupingSentinelIntSet_initWithInt_withInt_(initialSize, -1));
  JreStrongAssignAndConsume(&self->collectedGroups_, new_JavaUtilArrayList_initWithInt_(initialSize));
  IOSObjectArray *sortFields = [sortWithinGroup getSort];
  JreStrongAssignAndConsume(&self->fields_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(sortFields))->size_ type:OrgApacheLuceneSearchSortField_class_()]);
  JreStrongAssignAndConsume(&self->sortsIndex_, [IOSObjectArray newArrayWithLength:sortFields->size_ type:OrgApacheLuceneSearchFieldCache_StringIndex_class_()]);
  for (jint i = 0; i < sortFields->size_; i++) {
    *IOSIntArray_GetRef(nil_chk(self->reversed_), i) = [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(sortFields, i))) getReverse] ? -1 : 1;
    IOSObjectArray_Set(self->fields_, i, IOSObjectArray_Get(sortFields, i));
  }
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *new_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector, initWithNSString_withOrgApacheLuceneSearchSort_withInt_, groupField, sortWithinGroup, initialSize)
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector, initWithNSString_withOrgApacheLuceneSearchSort_withInt_, groupField, sortWithinGroup, initialSize)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector)

@implementation OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *)outer$
                                                                                                  withInt:(jint)doc
                                                                                             withNSString:(NSString *)groupValue {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withNSString_(self, outer$, doc, groupValue);
  return self;
}

- (jint)compareWithInt:(jint)compIDX
               withInt:(jint)doc {
  if (IOSIntArray_Get(nil_chk(sortOrds_), compIDX) < 0) {
    NSString *val1 = IOSObjectArray_Get(nil_chk(sortValues_), compIDX);
    NSString *val2 = IOSObjectArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(nil_chk(this$0_->sortsIndex_), compIDX)))->lookup_), IOSIntArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(this$0_->sortsIndex_, compIDX)))->order_), doc));
    if (val1 == nil) {
      if (val2 == nil) {
        return 0;
      }
      return -1;
    }
    else if (val2 == nil) {
      return 1;
    }
    return [val1 compareToWithId:val2];
  }
  else {
    return IOSIntArray_Get(sortOrds_, compIDX) - IOSIntArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(nil_chk(this$0_->sortsIndex_), compIDX)))->order_), doc);
  }
}

- (void)updateDocHeadWithInt:(jint)doc {
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(this$0_->sortsIndex_))->size_; i++) {
    IOSObjectArray_Set(nil_chk(sortValues_), i, IOSObjectArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(this$0_->sortsIndex_, i)))->lookup_), IOSIntArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(this$0_->sortsIndex_, i)))->order_), doc)));
    *IOSIntArray_GetRef(nil_chk(sortOrds_), i) = IOSIntArray_Get(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(this$0_->sortsIndex_, i)))->order_, doc);
  }
  self->doc_ = doc + this$0_->docBase_;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(sortValues_);
  RELEASE_(sortOrds_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x2, -1, 0, 1, -1, -1, -1 },
    { NULL, "I", 0x1, 2, 3, 1, -1, -1, -1 },
    { NULL, "V", 0x1, 4, 5, 1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector:withInt:withNSString:);
  methods[1].selector = @selector(compareWithInt:withInt:);
  methods[2].selector = @selector(updateDocHeadWithInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "sortValues_", "[LNSString;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "sortOrds_", "[I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "ILNSString;", "LJavaIoIOException;", "compare", "II", "updateDocHead", "I", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector;", "Lorg/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector$GroupHead<Ljava/lang/String;>;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead = { "GroupHead", "org.apache.lucene.search.grouping", ptrTable, methods, fields, 7, 0x0, 3, 3, 6, -1, -1, 7, -1 };
  return &_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead;
}

@end

void OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead_initWithId_withInt_(self, groupValue, doc + outer$->docBase_);
  JreStrongAssignAndConsume(&self->sortValues_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(outer$->sortsIndex_))->size_ type:NSString_class_()]);
  JreStrongAssignAndConsume(&self->sortOrds_, [IOSIntArray newArrayWithLength:outer$->sortsIndex_->size_]);
  for (jint i = 0; i < outer$->sortsIndex_->size_; i++) {
    IOSObjectArray_Set(self->sortValues_, i, IOSObjectArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(outer$->sortsIndex_, i)))->lookup_), IOSIntArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(outer$->sortsIndex_, i)))->order_), doc)));
    *IOSIntArray_GetRef(self->sortOrds_, i) = IOSIntArray_Get(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(IOSObjectArray_Get(outer$->sortsIndex_, i)))->order_, doc);
  }
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead, initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withNSString_, outer$, doc, groupValue)
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead, initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withNSString_, outer$, doc, groupValue)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead)

@implementation OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector

- (instancetype)initWithNSString:(NSString *)groupField
   withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sortWithinGroup
                         withInt:(jint)initialSize {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(self, groupField, sortWithinGroup, initialSize);
  return self;
}

- (id<JavaUtilCollection>)getCollectedGroupHeads {
  return collectedGroups_;
}

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer {
  JreStrongAssign(&self->scorer_, scorer);
}

- (void)retrieveGroupHeadAndAddIfNotExistWithInt:(jint)doc {
  jint key = IOSIntArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(groupIndex_))->order_), doc);
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *groupHead;
  if (![((OrgApacheLuceneSearchGroupingSentinelIntSet *) nil_chk(ordSet_)) existsWithInt:key]) {
    [ordSet_ putWithInt:key];
    NSString *term = key == 0 ? nil : IOSObjectArray_Get(nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(groupIndex_))->lookup_), key);
    groupHead = create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withNSString_(self, doc, term);
    [((id<JavaUtilList>) nil_chk(collectedGroups_)) addWithId:groupHead];
    IOSObjectArray_Set(nil_chk(segmentGroupHeads_), key, groupHead);
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = true;
  }
  else {
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = false;
    groupHead = IOSObjectArray_Get(nil_chk(segmentGroupHeads_), key);
  }
  JreStrongAssign(&temporalResult_->groupHead_, groupHead);
}

- (void)setNextReaderWithOrgApacheLuceneIndexIndexReader:(OrgApacheLuceneIndexIndexReader *)reader
                                                 withInt:(jint)docBase {
  JreStrongAssign(&self->indexReader_, reader);
  self->docBase_ = docBase;
  JreStrongAssign(&groupIndex_, [((id<OrgApacheLuceneSearchFieldCache>) nil_chk(JreLoadStatic(OrgApacheLuceneSearchFieldCache, DEFAULT))) getStringIndexWithOrgApacheLuceneIndexIndexReader:reader withNSString:groupField_]);
  [((OrgApacheLuceneSearchGroupingSentinelIntSet *) nil_chk(ordSet_)) clear];
  JreStrongAssignAndConsume(&segmentGroupHeads_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(groupIndex_))->lookup_))->size_ type:OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_class_()]);
  for (OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead * __strong collectedGroup in nil_chk(collectedGroups_)) {
    jint ord = [((OrgApacheLuceneSearchFieldCache_StringIndex *) nil_chk(groupIndex_)) binarySearchLookupWithNSString:((OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *) nil_chk(collectedGroup))->groupValue_];
    if (ord >= 0) {
      [ordSet_ putWithInt:ord];
      IOSObjectArray_Set(nil_chk(segmentGroupHeads_), ord, collectedGroup);
    }
  }
}

- (void)dealloc {
  RELEASE_(ordSet_);
  RELEASE_(collectedGroups_);
  RELEASE_(fields_);
  RELEASE_(scorer_);
  RELEASE_(segmentGroupHeads_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
    { NULL, "LJavaUtilCollection;", 0x4, -1, -1, -1, 1, -1, -1 },
    { NULL, "V", 0x1, 2, 3, 4, -1, -1, -1 },
    { NULL, "V", 0x4, 5, 6, 4, -1, -1, -1 },
    { NULL, "V", 0x1, 7, 8, 4, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithNSString:withOrgApacheLuceneSearchSort:withInt:);
  methods[1].selector = @selector(getCollectedGroupHeads);
  methods[2].selector = @selector(setScorerWithOrgApacheLuceneSearchScorer:);
  methods[3].selector = @selector(retrieveGroupHeadAndAddIfNotExistWithInt:);
  methods[4].selector = @selector(setNextReaderWithOrgApacheLuceneIndexIndexReader:withInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "ordSet_", "LOrgApacheLuceneSearchGroupingSentinelIntSet;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "collectedGroups_", "LJavaUtilList;", .constantValue.asLong = 0, 0x12, -1, -1, 9, -1 },
    { "fields_", "[LOrgApacheLuceneSearchSortField;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "scorer_", "LOrgApacheLuceneSearchScorer;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "segmentGroupHeads_", "[LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LNSString;LOrgApacheLuceneSearchSort;I", "()Ljava/util/Collection<Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector$ScoreAllGroupHeadsCollector$GroupHead;>;", "setScorer", "LOrgApacheLuceneSearchScorer;", "LJavaIoIOException;", "retrieveGroupHeadAndAddIfNotExist", "I", "setNextReader", "LOrgApacheLuceneIndexIndexReader;I", "Ljava/util/List<Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector$ScoreAllGroupHeadsCollector$GroupHead;>;", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector;", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead;", "Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector<Lorg/apache/lucene/search/grouping/TermAllGroupHeadsCollector$ScoreAllGroupHeadsCollector$GroupHead;>;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector = { "ScoreAllGroupHeadsCollector", "org.apache.lucene.search.grouping", ptrTable, methods, fields, 7, 0x8, 5, 5, 10, 11, -1, 12, -1 };
  return &_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector;
}

@end

void OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *self, NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_initWithNSString_withInt_(self, groupField, ((IOSObjectArray *) nil_chk([((OrgApacheLuceneSearchSort *) nil_chk(sortWithinGroup)) getSort]))->size_);
  JreStrongAssignAndConsume(&self->ordSet_, new_OrgApacheLuceneSearchGroupingSentinelIntSet_initWithInt_withInt_(initialSize, -1));
  JreStrongAssignAndConsume(&self->collectedGroups_, new_JavaUtilArrayList_initWithInt_(initialSize));
  IOSObjectArray *sortFields = [sortWithinGroup getSort];
  JreStrongAssignAndConsume(&self->fields_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(sortFields))->size_ type:OrgApacheLuceneSearchSortField_class_()]);
  for (jint i = 0; i < sortFields->size_; i++) {
    *IOSIntArray_GetRef(nil_chk(self->reversed_), i) = [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(sortFields, i))) getReverse] ? -1 : 1;
    IOSObjectArray_Set(self->fields_, i, IOSObjectArray_Get(sortFields, i));
  }
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *new_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector, initWithNSString_withOrgApacheLuceneSearchSort_withInt_, groupField, sortWithinGroup, initialSize)
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector, initWithNSString_withOrgApacheLuceneSearchSort_withInt_, groupField, sortWithinGroup, initialSize)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector)

@implementation OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *)outer$
                                                                                                    withInt:(jint)doc
                                                                                               withNSString:(NSString *)groupValue {
  OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withNSString_(self, outer$, doc, groupValue);
  return self;
}

- (jint)compareWithInt:(jint)compIDX
               withInt:(jint)doc {
  jfloat score = [((OrgApacheLuceneSearchScorer *) nil_chk(this$0_->scorer_)) score];
  if (IOSFloatArray_Get(nil_chk(scores_), compIDX) < score) {
    return 1;
  }
  else if (IOSFloatArray_Get(scores_, compIDX) > score) {
    return -1;
  }
  return 0;
}

- (void)updateDocHeadWithInt:(jint)doc {
  jfloat score = [((OrgApacheLuceneSearchScorer *) nil_chk(this$0_->scorer_)) score];
  for (jint i = 0; i < ((IOSFloatArray *) nil_chk(scores_))->size_; i++) {
    *IOSFloatArray_GetRef(scores_, i) = score;
  }
  self->doc_ = doc + this$0_->docBase_;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(scores_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x2, -1, 0, 1, -1, -1, -1 },
    { NULL, "I", 0x1, 2, 3, 1, -1, -1, -1 },
    { NULL, "V", 0x1, 4, 5, 1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector:withInt:withNSString:);
  methods[1].selector = @selector(compareWithInt:withInt:);
  methods[2].selector = @selector(updateDocHeadWithInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "scores_", "[F", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "ILNSString;", "LJavaIoIOException;", "compare", "II", "updateDocHead", "I", "LOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector;", "Lorg/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector$GroupHead<Ljava/lang/String;>;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead = { "GroupHead", "org.apache.lucene.search.grouping", ptrTable, methods, fields, 7, 0x0, 3, 2, 6, -1, -1, 7, -1 };
  return &_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead;
}

@end

void OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead_initWithId_withInt_(self, groupValue, doc + outer$->docBase_);
  JreStrongAssignAndConsume(&self->scores_, [IOSFloatArray newArrayWithLength:((IOSObjectArray *) nil_chk(outer$->fields_))->size_]);
  jfloat score = [((OrgApacheLuceneSearchScorer *) nil_chk(outer$->scorer_)) score];
  for (jint i = 0; i < ((IOSFloatArray *) nil_chk(self->scores_))->size_; i++) {
    *IOSFloatArray_GetRef(self->scores_, i) = score;
  }
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead, initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withNSString_, outer$, doc, groupValue)
}

OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *create_OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withNSString_(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *outer$, jint doc, NSString *groupValue) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead, initWithOrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withNSString_, outer$, doc, groupValue)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead)
